{% extends 'wildthoughts/base/base.html' %}
{% load staticfiles %}

{% block title_block %}
    {{ petition.title }}
{% endblock %}

{% block body_block %}
<div class="text-center p-4">
    <h1>{{ petition.title }}</h1>
</div>

<div class="container col-6">
    <div class="row">
        <div class="col-12 col-md-8">
            {% if petition.picture %}
            <img class="img-fluid" src="{{ MEDIA_URL }}{{ petition.picture }}" alt="{{ petition.title }}'s Picture">
            {% endif %}
            <h6 class="text-muted">Started {{ petition.date }}</h6>
            <div>
                <h3><strong>Description</strong></h3>
                <h6 class="text-muted">Started by {{ petition.author.user.username }}</h6>
                <h5>{{ petition.description }}</h5>
            </div>
        </div>

        <div class="col-12 col-md-4">
            <div class="progress" role="progressbar" aria-label="Example with label" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar" style="width: {{ progress_width }}%">{{ progress_width }}%</div>
            </div>

            <div class="d-flex justify-content-between">
                <div class="div">
                    <h3 id="signatures_count">{{ petition.signatures }}</h3>
                    <h5 class="text-muted">Signatures</h5>
                </div>
                <div class="div">
                    <h3>{{ petition.goal }}</h3>
                    <h5 class="text-muted">Goal</h5>
                </div>
            </div>

            {% if petition.signatures >= petition.goal %}
                <input class="btn btn-success btn-lg w-100 disabled" type="submit" name="submit" value="Goal Reached!" />
            {% elif has_signed %}
                <input class="btn btn-primary btn-lg w-100 disabled" type="submit" name="submit" value="Signed" disabled/>
            {% else %}
                <input id="sign_button" class="btn btn-primary btn-lg w-100" type="submit" name="submit" value="Sign Petition" data-petition-id="{{ petition.id }}" />
            {% endif %}
        </div>

    </div>

</div>
{% endblock %}

{% block script_block %}
<script src="{% static "js/petition.js" %}" crossorigin="anonymous"></script>
{% endblock %}
